{% extends 'base-front.html.twig' %}
{% block title %}Forums{% endblock %}
{% block navigation %}
<div class="sub-nav">
    <div class="sub-nav-tabs">
        <div class="tabs is-centered">
            <ul>
                <li>
                    <a href="{{ path('postFront') }}">Posts</a>
                </li>
                <li >
                    <a href="{{ path('announceFront') }}">Announces</a>
                </li>
                <li class="is-active">
                    <a href="{{ path('forumFront') }}">Forums</a>
                </li>
                <li>
                    <a href="{{ path('eventsFront') }}">Events</a>
                </li>
                <li>
                    <a href="{{ path('offreFront') }}">Offers</a>
                </li>
            </ul>
        </div>
    </div>
</div>
    </div>

{% endblock %}

{% block main %}
    <div class="view-wrapper">

        <div id="main-feed" class="navbar-v2-wrapper">

            <!-- Container -->
            <div class="container">

                <!-- Content placeholders at page load -->
                <!-- this holds the animated content placeholders that show up before content -->
                <div id="shadow-dom" class="view-wrap">
                    <div class="columns">

                        <div class="column is-3">

                            <!-- Placeload element -->
                            <div class="placeload weather-widget-placeload">
                                <div class="header">
                                    <div class="inner-wrap">
                                        <div class="img loads"></div>
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                                <div class="body">
                                    <div class="inner-wrap">
                                        <div class="rect loads"></div>
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload list-placeload">
                                <div class="header">
                                    <div class="content-shape loads"></div>
                                </div>
                                <div class="body">
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="column is-6">

                            <!-- Placeload element -->
                            <div class="placeload compose-placeload">
                                <div class="header">
                                    <div class="content-shape is-lg loads"></div>
                                    <div class="content-shape is-lg loads"></div>
                                    <div class="content-shape is-lg loads"></div>
                                </div>
                                <div class="body">
                                    <div class="img loads"></div>
                                    <div class="inner-wrap">
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload post-placeload">
                                <div class="header">
                                    <div class="img loads"></div>
                                    <div class="header-content">
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                                <div class="image-placeholder loads"></div>
                                <div class="placeholder-footer">
                                    <div class="footer-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload post-placeload">
                                <div class="header">
                                    <div class="img loads"></div>
                                    <div class="header-content">
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                                <div class="image-placeholder loads"></div>
                                <div class="placeholder-footer">
                                    <div class="footer-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload post-placeload">
                                <div class="header">
                                    <div class="img loads"></div>
                                    <div class="header-content">
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                                <div class="image-placeholder loads"></div>
                                <div class="placeholder-footer">
                                    <div class="footer-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload post-placeload">
                                <div class="header">
                                    <div class="img loads"></div>
                                    <div class="header-content">
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                    </div>
                                </div>
                                <div class="image-placeholder loads"></div>
                                <div class="placeholder-footer">
                                    <div class="footer-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="column is-3">

                            <!-- Placeload element -->
                            <div class="placeload stories-placeload">
                                <div class="header">
                                    <div class="content-shape loads"></div>
                                </div>
                                <div class="body">
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload mini-widget-placeload">
                                <div class="body">
                                    <div class="inner-wrap">
                                        <div class="img loads"></div>
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                        <div class="content-shape loads"></div>
                                        <div class="button-shape loads"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Placeload element -->
                            <div class="placeload list-placeload">
                                <div class="header">
                                    <div class="content-shape loads"></div>
                                </div>
                                <div class="body">
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                    <div class="flex-block">
                                        <div class="img loads"></div>
                                        <div class="inner-wrap">
                                            <div class="content-shape loads"></div>
                                            <div class="content-shape loads"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- Feed page main wrapper -->
                <div id="activity-feed" class="view-wrap true-dom is-hidden">
                    <div class="columns">
                        <!-- Left side column -->
                        <div class="column is-3 is-hidden-mobile">
                            <!-- Weather widget -->
                            <!-- /partials/widgets/weather-widget.html -->
                            <div class="card is-weather-card has-background-image"
                                 data-background="FrontOffice/assets/img/illustrations/cards/weather-bg.svg">
                                <div class="card-heading">
                                    <div class="dropdown is-spaced is-accent is-right dropdown-trigger is-light">
                                        <div>
                                            <div class="button">
                                                <i data-feather="more-vertical"></i>
                                            </div>
                                        </div>
                                        <div class="dropdown-menu" role="menu">
                                            <div class="dropdown-content">
                                                <a href="#" class="dropdown-item">
                                                    <div class="media">
                                                        <i data-feather="map-pin"></i>
                                                        <div class="media-content">
                                                            <h3>Change City</h3>
                                                            <small>Change the displayed city.</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="media">
                                                        <i data-feather="rotate-ccw"></i>
                                                        <div class="media-content">
                                                            <h3>Synchronize</h3>
                                                            <small>Synchronize with a weather source.</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a class="dropdown-item">
                                                    <div class="media">
                                                        <i data-feather="settings"></i>
                                                        <div class="media-content">
                                                            <h3>Settings</h3>
                                                            <small>Access widget settings.</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <hr class="dropdown-divider">
                                                <a href="#" class="dropdown-item">
                                                    <div class="media">
                                                        <i data-feather="trash-2"></i>
                                                        <div class="media-content">
                                                            <h3>Remove</h3>
                                                            <small>Removes this widget from your feed.</small>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="temperature">
                                        <span>71</span>
                                    </div>
                                    <div class="weather-icon">
                                        <div>
                                            <i data-feather="sun"></i>
                                            <h4>Sunny</h4>
                                            <div class="details">
                                                <span>Real Feel: 78° </span>
                                                <span>Rain Chance: 5%</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="previsions">
                                        <div class="day">
                                            <span>Mon</span>
                                            <i data-feather="sun"></i>
                                            <span>69°</span>
                                        </div>
                                        <div class="day">
                                            <span>Tue</span>
                                            <i data-feather="cloud-lightning"></i>
                                            <span>74°</span>
                                        </div>
                                        <div class="day">
                                            <span>Wed</span>
                                            <i data-feather="cloud-lightning"></i>
                                            <span>73°</span>
                                        </div>
                                        <div class="day">
                                            <span>Thu</span>
                                            <i data-feather="sun"></i>
                                            <span>68°</span>
                                        </div>
                                        <div class="day">
                                            <span>Fri</span>
                                            <i data-feather="cloud-drizzle"></i>
                                            <span>55°</span>
                                        </div>
                                        <div class="day">
                                            <span>Sat</span>
                                            <i data-feather="cloud-rain"></i>
                                            <span>58°</span>
                                        </div>
                                        <div class="day">
                                            <span>Sun</span>
                                            <i data-feather="sun"></i>
                                            <span>64°</span>
                                        </div>
                                    </div>
                                    <div class="current-date-location has-text-centered">
                                        <span class="date">Sunday, 18th 2018</span>
                                        <span class="location"> <i data-feather="map-pin"></i> Los Angeles, CA</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Pages widget -->
                            <!-- /partials/widgets/recommended-pages-1-widget.html briefcase-->
                            <!--#region Alert feed card  -->
                            <div class="card is-feed-card offer">
                                <div class="card-heading">
                                    <i data-feather="briefcase"></i>
                                </div>
                                <div class="card-body">
                                    <div>
                                        <div class="feed-avatar">
                                            <img src={{ "https://via.placeholder.com/300x300" }}
                                                 data-demo-src="FrontOffice/assets/img/avatars/dan.jpg" alt="">
                                        </div>
                                        <div class="feed-content">
                                            <h4>Sofrecom is Offering a opportunity </h4>
                                            <p>Sofrecom is offering a work-study program </p>
                                            <button type="button" class="button light-button">Consult</button>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!--#endregion -->
                        </div>
                        <!-- /Left side column -->

                        <!-- Middle column -->
                        <div class="column is-6">
                            <div id="compose-card" class="card is-new-content">
                                <!-- Top tabs -->

                            </div>
                            <div class="search-bar">
                                <form action={{path('forumFront')}} method="post">
                                    <p><input class="inputsearch" name="search" placeholder="search with title">
                                        <input class="inputsearch" name="tag" placeholder="tag">
                                        <button type="submit" class="button-shape">Search</button> </p>
                                </form>
                            </div>
                            <button id="open" value="click me" >Add forum</button>
                            <!--#region Post 1 -->
                            <!-- /partials/pages/feed/posts/feed-post1.html -->
                            <!--#region post without picture -->
                            {% for forum in forums %}
                                {% if forum.state == 'Active' %}
                            <div class="card is-post is-simple">
                                <!-- Main wrap -->
                                <div class="content-wrap">
                                    <!-- Header -->
                                    <div class="card-heading">
                                        <!-- User image -->
                                        <div class="user-block">
                                            <div class="image">
                                                <img src="{{asset('images/users/'~forum.idowner.imgurl)}}"
                                                      data-user-popover="8"
                                                     alt="">
                                            </div>
                                            <div class="user-info">
                                                <a href="#">{{ forum.idowner.getFirstName() }} {{ forum.idowner.getLastName() }}</a>
                                                <span class="time">{{ forum.datecreation|date }}</span>
                                            </div>
                                        </div>
                                        <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
                                        <div class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                                            <div>
                                                <div class="button">
                                                    <i data-feather="more-vertical"></i>
                                                </div>
                                            </div>
                                            <div class="dropdown-menu" role="menu">
                                                <div class="dropdown-content">
                                                    <a href={{ path('deleteforumfront', {'id': forum.idforum}) }} class="dropdown-item">
                                                        <div class="media">
                                                            <div class="media-content">
                                                                <h3>Delete</h3>
                                                                <small>Delete this forum.</small>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a href={{ path('edit-forum',{'id':forum.idforum}) }} id="openedit" class="dropdown-item">
                                                        <div class="media">
                                                            <div class="media-content">
                                                                <h3>Edit</h3>
                                                                <small>Edit this forum.</small>
                                                            </div>

                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /Header -->

                                    <!-- Post body -->
                                    <div class="card-body">
                                        <div class="title">
                                            <h5>{{ forum.title }}</h5>
                                        </div>
                                        <!-- Post body text -->
                                        <div class="post-text">
                                            <p>{{ forum.content }}</p>
                                            <a href="#">#{{ forum.categorieforum }}</a>
                                        </div>
                                        <!-- Post actions -->
                                        <div class="post-actions">
                                            <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                                            <div class="like-wrapper">
                                                <a href="{{ path('reacted-forum',{'id':forum.idforum}) }}" class="like-button">
                                                    <i class="mdi mdi-heart not-liked bouncy"></i>
                                                    <i class="mdi mdi-heart is-liked bouncy"></i>
                                                    <span class="like-overlay"></span>
                                                </a>
                                            </div>

                                            <div class="fab-wrapper is-comment">
                                                <a href="javascript:void(0);" class="small-fab">
                                                    <i data-feather="message-circle"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /Post body -->

                                    <!-- Post footer -->
                                    <div class="card-footer">
                                        <!-- Followers -->
                                        <div class="likers-group">
                                            <img src="https://via.placeholder.com/300x300"
                                                 data-demo-src="FrontOffice/assets/img/avatars/daniel.jpg" data-user-popover="3" alt="">
                                            <img src="https://via.placeholder.com/300x300"
                                                 data-demo-src="FrontOffice/assets/img/avatars/elise.jpg" data-user-popover="6" alt="">
                                        </div>
                                        <div class="likers-text">
                                            <p>
                                                <a href="#">Daniel</a> and
                                                <a href="#">Elise</a>
                                            </p>
                                            <p>liked this</p>
                                        </div>
                                        <!-- Post statistics -->
                                        <div class="social-count">
                                            <div class="likes-count">
                                                <i data-feather="heart"></i>
                                                <span>{{ forum.nbrlikesforum }}</span>
                                            </div>
                                            <div class="comments-count">
                                                <i data-feather="message-circle"></i>
                                                <span>{{ forum.nbrresponseforum }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /Post footer -->
                                </div>
                                <!-- /Main wrap -->

                                <!-- Post #6 comments -->
                                <div class="comments-wrap is-hidden">
                                    <!-- Header -->
                                    <div class="comments-heading">
                                        <h4>
                                            Responses
                                            <small>(0)</small>
                                        </h4>
                                        <div class="close-comments">
                                            <i data-feather="x"></i>
                                        </div>
                                    </div>
                                    <!-- /Header -->

                                    <!-- Comments body -->

                                    {% for response in responses %}
                                    {% if response.idforum.getIdForum() == forum.idforum %}
                                    <div class="comments-body has-slimscroll">
                                        <div class="media is-comment">
                                            <!-- User image -->
                                            <div class="media-left">
                                                <div class="image">
                                                    <img src="{{asset('images/users/'~response.cinuser.getImgurl())}}"
                                                         data-demo-src="{{asset('images/users/'~response.cinuser.getImgurl())}}" data-user-popover="1"
                                                         alt="">
                                                </div>
                                            </div>
                                            <!-- Content -->
                                            <div class="media-content">
                                                <a href="#">{{ response.cinuser.getFirstName() }} {{ response.cinuser.getLastName() }}</a>
                                                <span class="time">{{ response.getCreatedat()|date }}</span>
                                                <p>{{ response.content }}</p>
                                                <!-- Actions -->
                                                <div class="controls">
                                                    <div class="like-count">
                                                        <i data-feather="thumbs-up"></i>
                                                        <span>4</span>
                                                    </div>

                                                    <div class="edit">
                                                        <a href="{{ path('deleteresponsefront') ,{'id':response.idforum,'idu':response.cinuser}}}"class="button">Delete</a>

                                                    </div>
                                                </div>

                                            </div>

                                        </div>

                                    </div>

                                       {% endif %}
                                    {% endfor %}
                                    <!-- /Comments body -->

                                    <!-- Comments footer -->
                                    <div class="card-footer">
                                        <div class="media post-comment has-emojis">
                                            <!-- Textarea -->

                                            <div class="media-content">
                                                <form method="post" action= {{  path('createresponse',{'idforum':forum.idforum}) }}>
                                                <div class="field">
                                                    <p class="control">
                                                    <textarea class="textarea comment-textarea" rows="5"
                                                              placeholder="Write a response..." name="responsecontent"></textarea>
                                                    </p>
                                                </div>
                                                <!-- Additional actions -->
                                                <div class="actions">
                                                    <div class="image is-32x32">
                                                        <img class="is-rounded" src="https://via.placeholder.com/300x300"
                                                             data-demo-src="FrontOffice/assets/img/avatars/jenna.png"
                                                             data-user-popover="0" alt="">
                                                    </div>
                                                    <div class="toolbar">
                                                        <div class="action is-auto">
                                                            <i data-feather="at-sign"></i>
                                                        </div>
                                                        <div class="action is-emoji">
                                                            <i data-feather="smile"></i>
                                                        </div>
                                                        <div class="action is-upload">
                                                            <i data-feather="camera"></i>
                                                            <input type="file">
                                                        </div>
                                                        <button type="submit" class="button is-solid primary-button raised">Forum response</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>

                                        </div>
                                    </div>
                                    <!-- /Comments footer -->
                                </div>
                                <!-- /Post #6 comments -->
                            </div>
                                    <div class="model-container" id="model-container">

                                        <form action={{ path('addforum') }} method="post" id="addForum">
                                            <div class="form">
                                                <div class="title">Add new forum</div>
                                                <div class="subtitle">Let's create a new forum</div>
                                                <div class="input-container ic1">
                                                    <input id="field1" class="input" type="text" placeholder="Title" name="title" />
                                                    <div class="cut"></div>
                                                    <label for="field1" class="placeholder">Title</label>
                                                    <div class="msg">
                                                        <small id="errorMsg"></small>
                                                    </div>
                                                </div>
                                                <div class="input-container ic2">
                                                    <input id="field2" class="input" type="text" placeholder="Content" name="content"  />
                                                    <div class="cut"></div>
                                                    <label for="field2" class="placeholder">Content</label>
                                                    <div class="msg">

                                                        <small id="errorMsg"></small>
                                                    </div>
                                                </div>
                                                <div class="input-container ic2">
                                                    <textarea id="field3" class="input"  placeholder="tag" name="tag" ></textarea>
                                                    <div class="cut cut-short"></div>
                                                    <label for="field3" class="placeholder">Tag</label>
                                                    <div class="msg">
                                                        <small id="errorMsg"></small>
                                                    </div>
                                                </div>
                                                <button id="submit" type="submit" class="submit">Submit</button>
                                                <button type="button" class="exit" id="close">X</button>
                                            </div>
                                        </form>

                                    </div>

                                {% endif %}
                            {% endfor %}
                            <div class="text-center">{{ knp_pagination_render(forums) }}</div>
                        </div>
                        <!-- /Middle column -->

                        <!-- Right side column -->
                        <div class="column is-3">
                            <!--#region event feed card  -->
                            {{ render(controller(
                                'App\\Controller\\EventController::setEventCard'
                            )) }}


                            <!--#endregion -->
                            <!--#region Alert feed card  -->
                            <div class="card is-feed-card announce">
                                <div class="card-heading">
                                    <i data-feather="alert-circle"></i>
                                </div>
                                <div class="card-body">
                                    <div>
                                        <div class="feed-avatar">
                                            <img src="https://via.placeholder.com/300x300"
                                                 data-demo-src="FrontOffice/assets/img/avatars/dan.jpg" alt="">
                                        </div>
                                        <div class="feed-content">
                                            <h4>Mohamed taher have an alert !! </h4>
                                            <p>You have a test tomorrow ,stay sharp </p>
                                            <button type="button" class="button light-button">Consult</button>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!--#endregion -->
                        </div>
                    </div>
                    <!-- /Feed page main wrapper -->
                </div>

            </div>


        </div>




{% endblock %}